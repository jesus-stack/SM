@model IEnumerable<Infraestructure.Models.Producto>

@{
    ViewBag.Title = "Inventario Productos";
}
<div class="container">
    <h1 class="stock_h1 col-12">Productos</h1>
    <br />
    <div class="row">
        <div class="col-2 new_action">
            <a href="~/Producto/Crear" class="bx bx-message-square-add">
                <strong>Nuevo</strong>
            </a>
        </div>
        <div class="offset-md-3 col-2"><h1 class="stock_h1">@ViewBag.Subtitle</h1></div>
        <div class="offset-md-3 col-2">

            <div class="btn-group dropleft">
                <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Categoría
                </button>
                <div class="dropdown-menu bg-primary" aria-labelledby="dropdownMenuButton">
                    <strong>
                        @Ajax.ActionLink("Todas",
              "listarTabla", null
                       , new AjaxOptions
                       {
                           UpdateTargetId = "tabla",
                           InsertionMode = InsertionMode.Replace
                       }, new { @class = "dropdown-item shover" })
                    </strong>
                    @foreach (var item in (IEnumerable<Infraestructure.Models.Categoria>)ViewBag.categorias)
                    {
                        <strong>
                            @Ajax.ActionLink(item.Descripcion,
                  "listarTabla", new { id = item.Id, sub = item.Descripcion }
                           , new AjaxOptions
                           {
                               UpdateTargetId = "tabla",
                               InsertionMode = InsertionMode.Replace
                           }, new { @class = "dropdown-item shover text-capitalize" })
                        </strong>
                    }

                </div>
            </div>
            
        </div>
        <br />
        <div class="offset-md-8">
            @using (Ajax.BeginForm("listarNombre", "Producto", new AjaxOptions
            {
                UpdateTargetId = "tabla",
                InsertionMode = InsertionMode.Replace,
                HttpMethod = "GET"
            }))
            { 
                <div class="card-body">
                    <div class="input-group">
                        <div class="ui-widget">
                            @Html.TextBox("filtro", "", new { @class = "form-control", @placeholder = "Nombre" })
                        </div>
                    

                        <button type="submit" class="btn btn-default">Buscar</button>

                    </div>
                </div>

            }
        </div>
    </div>
    <div id="tabla" class="col-12">
        <div id="ajaxLoader" class="center-block" alt="Cargando ..." style="height:100px;width:100px; display:none">
            <img src="~/Source/img/load.gif" />
        </div>
        @Html.Partial("_PartialTablaP")
    </div>
</div>
@section scripts {
    @Scripts.Render("~/bundles/jqueryajax")
    @Scripts.Render("~/bundles/jqueryui")
}
<script>
   $(function () {
        var lista = @Html.Raw(Json.Encode(ViewBag.ListaNombres));
        $("#filtro").autocomplete({
            source: lista
        });
    });
</script>

